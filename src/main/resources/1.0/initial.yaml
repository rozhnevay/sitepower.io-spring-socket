databaseChangeLog:
  - changeSet:
      id: 20200809_create_extension
      author: arozhnev
      changes:
        - sql:
            # Password: qwe
            sql: CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
  - changeSet:
      id: 20200809_create_tenant_table
      author: arozhnev
      changes:
        - createTable:
            tableName: tenant
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_tenant
                  defaultValue: uuid_generate_v1()
              - column:
                  name: main_user_id
                  type: uuid
              - column:
                  name: created_date
                  type: TIMESTAMP WITHOUT TIME ZONE
                  constraints:
                    nullable: false
                  defaultValue: now()

  - changeSet:
      id: 20200809_create_user_info_table
      author: arozhnev
      changes:
        - createTable:
            tableName: user_info
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_user
                  defaultValue:  uuid_generate_v1()
              - column:
                  name: email
                  type: varchar(255)
              - column:
                  name: password
                  type: varchar(64)
                  constraints:
                    nullable: false
              - column:
                  name: full_name
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: tenant_id
                  type: uuid
                  constraints:
                    nullable: false
                    foreignKeyName: fk_tenant
                    references: tenant(id)
              - column:
                  name: created_date
                  type: TIMESTAMP WITHOUT TIME ZONE
                  constraints:
                    nullable: false
                  defaultValue: now()
  - changeSet:
      id: 20200812_create_form_table
      author: arozhnev
      changes:
        - createTable:
            tableName: form
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_form
                  defaultValue:  uuid_generate_v1()
              - column:
                  name: tenant_id
                  type: uuid
                  constraints:
                    nullable: false
                    foreignKeyName: fk_tenant
                    references: tenant(id)
              - column:
                  name: origin
                  type: varchar(1000)
              - column:
                  name: position
                  type: int
                  defaultValue: 0
              - column:
                  name: color
                  type: varchar(1000)
                  defaultValue: 'sitepower'
              - column:
                  name: gradient
                  type: int
                  defaultValue: 1
              - column:
                  name: label
                  type: varchar(100)
                  defaultValue: 'sitepower'
              - column:
                  name: message_placeholder
                  type: varchar(1000)
                  defaultValue: 'Напишите нам!'
              - column:
                  name: test
                  type: varchar(1)
                  defaultValue: 'N'
              - column:
                  name: updated_date
                  type: TIMESTAMP WITHOUT TIME ZONE
                  constraints:
                    nullable: false
                  defaultValue: now()
              - column:
                  name: created_date
                  type: TIMESTAMP WITHOUT TIME ZONE
                  constraints:
                    nullable: false
                  defaultValue: now()
  - changeSet:
      id: 20200812_create_dialog_table
      author: arozhnev
      changes:
        - createTable:
            tableName: dialog
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_dialog
                  defaultValue:  uuid_generate_v1()
              - column:
                  name: tenant_id
                  type: uuid
                  constraints:
                    nullable: false
                    foreignKeyName: fk_tenant
                    references: tenant(id)
              - column:
                  name: class
                  type: varchar(10)
              - column:
                  name: full_name
                  type: varchar(1000)
              - column:
                  name: region
                  type: varchar(1000)
              - column:
                  name: form_id
                  type: uuid
                  constraints:
                    nullable: false
                    foreignKeyName: fk_form
                    references: form(id)
              - column:
                  name: cnt_unanswered
                  type: bigint
              - column:
                  name: last_msg_id
                  type: uuid
              - column:
                  name: created_date
                  type: TIMESTAMP WITHOUT TIME ZONE
                  constraints:
                    nullable: false
                  defaultValue: now()
              - column:
                  name: updated_date
                  type: TIMESTAMP WITHOUT TIME ZONE
                  constraints:
                    nullable: false
                  defaultValue: now()
  - changeSet:
      id: 20200812_create_message_table
      author: arozhnev
      changes:
        - createTable:
            tableName: message
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: pk_message
                  defaultValue:  uuid_generate_v1()
              - column:
                  name: body
                  type: text
              - column:
                  name: type
                  type: varchar(100)
              - column:
                  name: link
                  type: text
              - column:
                  name: direction
                  type: varchar(10)
              - column:
                  name: user_info_id
                  type: uuid
                  constraints:
                    foreignKeyName: fk_user_info
                    references: user_info(id)
              - column:
                  name: dialog_id
                  type: uuid
                  constraints:
                    nullable: false
                    foreignKeyName: fk_dialog
                    references: dialog(id)
              - column:
                  name: created_date
                  type: TIMESTAMP WITHOUT TIME ZONE
                  constraints:
                    nullable: false
                  defaultValue: now()




